<extend name="Public/nomenu" />

<block name="main">
    <div class="login page">
        <div class="form">
            <div class="mobile-field">
                <input type="tel" class="mobile-number" id="tel" placeholder="请输入手机号" style="color:#000000">
            </div>

            <div class="keyword-field">
                <input type="password" class="mobile-keywords" id="keywords" placeholder="请输入密码" style="color:#000000">

            </div>
            <button class="login-btn" onclick="do_login()">登录</button>
            <input type="hidden" id="refererUrl" value="{$refererUrl}">
            <!--<p class="text">点击登录，即表示您同意沃德股市气象站 <a href="/license">用户协议</a>和 <a href="/disclaimer">免责声明</a></p>-->
        </div>
    </div>
    <script type="text/javascript">
    $(function(){
       $("#login_btn").click(function() {
		if ($("#login-form").valid()) {
            $("#login-form").submit();
        }
		
	});
	var validator = $("#login-form").validate({
			rules: {
				Mobile: {
					required: true,
                    isMobile:true,
                     remote: {
                    type: "get",
                    url: "/ajaxIsUserExist" 
                }
				},
				Pass: {
					required: true,
                    rangelength:[6,16]
				},
			},
			messages: {
				Mobile: {
					required: '手机号码不能为空',
                    isMobile:"请正确填写手机号码!",
                    remote:"该账号不存在!"
				},
				Pass: {
					required: '必填字段',
                    rangelength:"密码长度在6-16位之间"
				}
			},
			errorPlacement: function(error, element) {
				error.appendTo(element.parent().next());
				element.addClass("error_border");
			},
			submitHandler: function(form) {

			},
			success: function(label,element) {
				label.html("&nbsp;").addClass("checked");
				$(element).removeClass("error_border");
			},
			highlight: function(element, errorClass) {
				//$(element).parent().next().find("." + errorClass).removeClass("checked");
				$(element).addClass("error_border");
			}
		})
    });
    </script>
    <!--<script>
        $(document).ready(function () {
            $("#tel").blur(function(){
                var tel = $(this).val();
                if(tel==''){
                    return;
                }
                $.ajax({
                    url:'/ajaxIsUserExist',
                    type:'get',
                    data:{
                        tel:tel,
                    },
                    dataType:'json',
                    success:function (data) {
                        console.log(data);
                    }
                })
            });

            $("#login-btn").on('click',function (e) {
                var tel = $('#tel').val();
                var keyword = $('#keyword').val();
                $.ajax({
                    url:'/ajaxDoLogin',
                    type:'post',
                    data:{
                        tel:tel,
                        keyword:keyword
                    },
                    dataType:'json',
                    success:function (data) {
                        if(data.status==100){
                            var refererUrl = $('#refererUrl').val();
                            alert(refererUrl);
                            if(refererUrl!=''){
                                window.location.href=refererUrl;
                            }else{
                                window.location.href='/club';
                            }

                        }
                        console.log(data);
                    }
                })
            })
        })
    </script>-->
</block>